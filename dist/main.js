(()=>{"use strict";function t(t,e,n,a){const o={};return o.name=t,o.length=e,o.hits=n,o.sunken=a,o.hit=function(){o.hits+=1,o.isSunk()},o.isSunk=function(){return o.hits===o.length&&(o.sunken=!0),o.sunken},o}function e(t,e){const n={};n.isCpuBoard=t,n.allSunk=e,n.board=[];for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push({hasShip:!1,isHit:!1});n.board.push(t)}return n.placeShip=function(t,e,a,o){let r=a.length;if(0===o&e+r>10)return!0;if(1===o&t+r>10)return!0;if(function t(e,a,o,r){return 0!==o&&(1===r&!1===n.board[a][e].hasShip?t(e+1,a,o-1,r):!(0===r&!1===n.board[a][e].hasShip)||t(e,a+1,o-1,r))}(t,e,r,o))return!0;{let r=document.querySelector(`[data-row='${e}'][data-col='${t}']`);r.classList.add("has-ship");for(let d=0;d<a.length;d++)1===o&&(n.board[e][t+d].hasShip=!0,n.board[e][t+d].ship=a,r=document.querySelector(`[data-row='${e}'][data-col='${t+d}']`),r.classList.add("has-ship")),0===o&&(n.board[e+d][t].hasShip=!0,n.board[e+d][t].ship=a,r=document.querySelector(`[data-row='${e+d}'][data-col='${t}']`),r.classList.add("has-ship"))}},n.receiveAttack=function(t,e){if(n.board[t][e].isHit)return alert("Cell already hit"),!0;n.board[t][e].isHit=!0,document.querySelector(`[data-row='${t}'][data-col='${e}']`).classList.add("is-hit"),n.board[t][e].hasShip?(n.board[t][e].ship.hit(),console.log("Hit!")):console.log("Missed!")},n}function n(t,e){const n={};return n.name=t,n.isCpu=e,n.turn=!1,n.switchTurn=function(){!0!==n.turn?n.turn=!0:n.turn=!1},n.attack=function(){if(e)return{xCord:Math.floor(10*Math.random()),yCord:Math.floor(10*Math.random())}},n}let a,o;function r(t){let e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),a=Math.round(Math.random());if(o.gameBoardCpu.placeShip(e,n,t,a))return r(t);o.gameBoardCpu.placeShip(e,n,t,a)}!function(){const t=document.createElement("div");t.id="popupContainer",t.classList.add("popup-container"),document.body.appendChild(t);const e=document.createElement("div");e.classList.add("popup-content"),t.appendChild(e);const n=document.createElement("h2");n.textContent="Enter Your Name",e.appendChild(n);const o=document.createElement("input");o.type="text",o.id="nameInput",o.placeholder="Your Name",e.appendChild(o);const r=document.createElement("button");r.textContent="Next",r.id="nextBtn",e.appendChild(r),r.addEventListener("click",(()=>{a=o.value,t.style.display="none"}));const d=document.createElement("style");d.textContent="\n        .popup-container {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        }\n\n        .popup-content {\n        background-color: white;\n        padding: 20px;\n        border-radius: 5px;\n        }\n\n        .popup-content h2 {\n        margin-top: 0;\n        }\n\n        .popup-content input,\n        .popup-content button {\n        margin-top: 10px;\n        }\n    ",document.head.appendChild(d)}(),document.getElementById("displayBtn").addEventListener("click",(()=>{o=function(){const o={};return o.gameBoardHuman=e(!1,!1),o.gameBoardCpu=e(!0,!1),o.humanPlayer=n(a,!1),o.cpuPlayer=n("CPU",!0),o.carrier=t("Carrier",5,0,!1),o.battleship=t("Battleship",4,0,!1),o.cruiser=t("Cruiser",3,0,!1),o.submarine=t("Submarine",3,0,!1),o.destroyer=t("Destroyer",2,0,!1),o}(),function(t,e){const n=document.createElement("div");n.classList.add("gameboard");for(let e=0;e<t.length;e++){const a=document.createElement("div");a.classList.add("row");for(let n=0;n<t[e].length;n++){const t=document.createElement("div");t.classList.add("cell"),t.setAttribute("data-row",e),t.setAttribute("data-col",n),a.appendChild(t)}n.appendChild(a)}e.appendChild(n)}(o.gameBoardCpu.board,document.getElementById("gameboard2")),r(o.carrier),r(o.battleship),r(o.cruiser),r(o.submarine),r(o.destroyer)})),document.getElementById("attackBtn").addEventListener("click",(()=>{o.gameBoardCpu.receiveAttack(o.cpuPlayer.attack().xCord,o.cpuPlayer.attack().yCord)&&(console.log("retry"),o.gameBoardCpu.receiveAttack(o.cpuPlayer.attack().xCord,o.cpuPlayer.attack().yCord))}))})();